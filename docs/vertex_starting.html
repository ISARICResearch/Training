<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAP Report</title>
    <style>
        body {
            display: flex;
            font-family: Arial, sans-serif;
            margin: 0;
            overflow-x: hidden;
        }
        .sidebar {
            width: 250px;
            background-color: #f4f4f4;
            padding: 15px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            height: 100vh;
            position: fixed;
            overflow-y: auto;
        }
        .content {
            margin-left: 270px;
            padding: 20px;
            max-width: 900px;
        }
        .content h1, .content h2, .content h3 {
            margin-top: 40px;
        }
        .content p, .content img {
            max-width: 100%;
        }
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        code {
            color: #f8f8f2;
        }
        .sidebar a {
            display: block;
            padding: 10px;
            color: #333;
            text-decoration: none;
            margin-bottom: 5px;
            border-radius: 5px;
        }
        .sidebar a:hover {
            background-color: #ddd;
        }
    </style>
</head>
<body>
    <div class="sidebar">
	<h2><a href="https://isaricresearch.github.io/Training/">Home</a></h2>
	<div style="padding-left:10px">
            <h2>Contents</h2>
	    <a href="#introduction">Introduction</a>
	    <a href="#installation">Installation</a>
	    <a href="#cloning">Cloning the Repository</a>
	    <a href="#getting-started">Getting started</a>
	    <a href="#insight-panels">Insight panels</a>
	    <a href="#next-steps">Insight panel guide</a>
	</div>
    </div>
    <div class="content">
        <h1 id="getting_started">Getting Started with VERTEX</h1>

        <h2 id="introduction">Introduction</h2>
	    
        <p>VERTEX is a web-based application designed to present graphs and tables based on relevant research questions that need to be quickly answered during an outbreak. VERTEX uses reproducible analytical pipelines. Currently, we have pipelines for identifying the spectrum of clinical features in a disease and determining risk factors for patient outcomes. New questions will be added by the ISARIC team and the wider scientific community, enabling the creation and sharing of new pipelines.</p>

	<video loop controls autoplay muted>
          <source src="https://github.com/ISARICResearch/Training/raw/main/docs/assets/vertex.mp4" type="video/mp4">
        </video>
	
	<p>This guide will help you set up a VERTEX dashboard on your local machine, and explore the existing pipelines.</p>
	    
        <h2 id="cloning">Cloning the Repository</h2>

        <p>First, clone the VERTEX GitHub repository. If you have <a href="https://github.com/git-guides/install-git">git</a> already installed then, at the command line:</p>

        <pre><code>git clone https://github.com/ISARICResearch/VERTEX.git</code></pre>

        <p>You can also download the repository manually, by clicking on the green button "Code" in the VERTEX GitHub repository, then on "Download ZIP".</p>

        <img src="https://github.com/ISARICResearch/Training/raw/main/docs/assets/16_github.png" alt="GitHub">

        <p>This will create a local version of the repository on your machine.</p>

        <p>If you used git, this repository will be in your current working directory, named VERTEX. Navigate to the repository, at the command line:</p>

        <pre><code>cd VERTEX</code></pre>

        <p>If you downloaded the repository manually, this repository will be in your Downloads folder, named VERTEX-main. Click into this folder.</p>
        
        <h2 id="installation">Installation</h2>

        <p>VERTEX is a tool based on Python code. Please ensure you have <a href="https://www.python.org/downloads/">Python</a> installed on your machine. You can check which version of Python you currently have installed, at the command line:</p>

        <pre><code>python --version</code></pre>

        <p>Install the dependencies using the requirements.txt file. If you are currently working on several projects, you may want to create a new environment for VERTEX. You may want to use environment management software such as <a href="https://www.docker.com">Docker</a> or <a href="https://docs.conda.io/en/latest/Conda">Conda</a>.</p>

        <pre><code>python3 -m pip install -r requirements.txt</code></pre>

	<h2 id="Config file">Modify the config file</h2>

	<p>If you want VERTEX to run using a REDCap database, you need to modify the file called redcap_config.py to include your REDCap API token. The API token currently in this file is for a small low-fidelity synthetic dataset (fake data) hosted in an ISARIC REDCap project.</p>
	    
	<p>If your database contains real patient data, then is vitally important that you <strong>do not share this API token</strong>, as others may be able to access your data if you do so. The easiest way to avoid this scenario is if you do not share your version of the redcap_config.py, once you've updated this.</p>

	<p>You should also change the REDCap url to your institution's REDCap URL and provide site codes for all sites in your database. VERTEX currently assumes the subject IDs are formatted as 'xxxxx-yyyy' where 'xxxxx' is the site code listed and 'yyyy' is the patient number for that site.</p>
	    
	<pre><code>redcap_api_key='378073224101A9B362728EB629C0385F'
redcap_url='https://ncov.medsci.ox.ac.uk/api/'
site_mapping={'01820':'PAK'}</code></pre>
	    
        <h2 id="dashboard_script">Run the dashboard script</h2>

        <p>To start VERTEX, run the following command from within the VERTEX repository.</p>

        <pre><code>python3 descriptive_dashboard.py</code></pre>

        <p>The VERTEX dashboard will now be running. The program will print output including the following: "Dash is running on http://x.x.x.x:xxxx/", where x is replaced by numbers. Copy this http address into your web browser to open the dashboard.</p>

	<h2 id="dashboard">VERTEX dashboard</h2>

	<p>The VERTEX dashboard is an interactive map with a menu for accessing insight panels. The first item in the menu is <strong>Filters and Controls</strong>, which can be used to filter the displayed data according to Gender, Age, Outcome, and Country (A). Each of the other items in the menu represents on a key research question (B). Within an item, there are items for each study endpoint associated with this research question. Clicking on one of these items will bring up the insight panel for this endpoint. Countries with patients in the data is highlighted on the map, with the colour indicating how many patients are from each country.</p>

        <img src="https://github.com/ISARICResearch/Training/raw/main/docs/assets/10_vertex.png" alt="VERTEX structure">
	    
        <h2 id="insight-panels">Insight panels</h2>

	<p>Insight panels show visualisations relevant to a particular study endpoint. An insight panel contains another <strong>Filters and Controls</strong> setting (D), a list of all insights for the endpoint (E), a visualisation or table for the selected insight (F), and <strong>About</strong> and <strong>Instructions</strong> buttons for further information (G).</p>

	<img src="https://github.com/ISARICResearch/Training/raw/main/docs/assets/17_insights.png" alt="VERTEX structure">
	    
        <p>The VERTEX dashboard includes default insight panels:</p>

        <ul>
            <li>Characterisation
            <ul>
                <li>Clinical features</li>
		    </ul>
            </li>
            <li>Risk/Prognosis
            <ul>
                <li>Clinical features by patient outcome</li>
                <li>Risk factors for patient outcomes</li>
		    </ul>
            </li>
		</ul>

        <h2 id="next-steps">Next steps</h2>

        <p>For a more detailed guide in writing new reproducible analytic pipelines (RAPs) for VERTEX, please refer to the <a href="https://isaricresearch.github.io/Training/insight_panel.html">insight panel guide</a>.</p>

      </div>
 </body>
 </html>
